---
layout:     post
title:      æ·±å…¥è§£æ ERC-721 NFT æ ‡å‡†ï¼šåŸç†ã€æ¥å£ä¸æœªæ¥åœºæ™¯
date:       2025-09-05
header-img: img/post-bg-desk.jpg
catalog: true
---

> æ¯ä¸€å¹…ä»·å€¼è¿åŸçš„ CryptoKittyï¼ŒèƒŒåéƒ½ä¾èµ–ä¸€æ¡ç®€æ´å´ä¸¥è°¨çš„åè®®â€”â€”ERC-721ã€‚æœ¬ç¯‡æ–‡ç« ç”¨ä¸­æ–‡ä¸ºä½ æ‹†è§£ **NFT åè®®** çš„æŠ€æœ¯ç»†èŠ‚ã€è½åœ°åœºæ™¯ä¸æ‰©å±•æ–¹å‘ï¼Œå¸¦ä½ ä¸€ç«™å¼è¯»æ‡‚â€œä¸å¯æ›¿ä»£ä»£å¸â€ã€‚

---

## 1. ERC-721 æ˜¯ä»€ä¹ˆï¼Ÿ
**æ ¸å¿ƒå…³é”®è¯ï¼šéåŒè´¨åŒ–ä»£å¸ã€NFT æ ‡å‡†ã€æ™ºèƒ½åˆçº¦**

ERC-721 æ˜¯ Ethereum ä¸Šå®šä¹‰ **éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰** çš„åè®®ã€‚ä¸ ERC-20 çš„å¯æ›¿ä»£å±æ€§ä¸åŒï¼Œæ¯ä¸ª ERC-721 ä»£å¸éƒ½æœ‰**å…¨å±€å”¯ä¸€**çš„ `tokenId`ï¼Œä»¥è‡³äºä»»ä½•ä¸¤ä»¶ NFT éƒ½æ— æ³•ç­‰é‡äº’æ¢ã€‚  
ç°å®ä¸­çš„è‰ºæœ¯å“ã€é—¨ç¥¨ã€åŸŸåä¹ƒè‡³å®ä½“æˆ¿äº§ï¼Œä¸€æ—¦æ˜ å°„æˆ ERC-721ï¼Œå°±èƒ½åœ¨é“¾ä¸Šç¡®æƒã€æµé€šã€äº¤æ˜“ã€‚

---

## 2. ä¸€å¥è¯çœ‹æ‡‚â€œéåŒè´¨åŒ–â€
| åŒè´¨ | 1 ç¾å…ƒå¯æ¢ 1 ç¾å…ƒ |
| --- | --- |
| éåŒè´¨ | ç¼–å· 8888 çš„ CryptoKitty ä¸ç¼–å· 9999 çš„ CryptoKitty ä»·æ ¼å¤©å·®åœ°åˆ« |

æ­£å›  **ç‹¬ç‰¹æ€§** ä¸ **ä¸å¯æ‹†åˆ†ï¼ˆæœ€å°å•ä½ä¸º 1ï¼‰**ï¼ŒNFT æ‰å…·å¤‡ç¨€ç¼ºä»·å€¼ï¼Œä¹Ÿè®©èµ„äº§â€œä¸Šé“¾â€åœ¨é“¾ä¸Šå½¢æˆçœŸæ­£çš„ç¨€ç¼ºå¸‚åœºã€‚

---

## 3. ERC-721 æ¥å£å…¨æ™¯å›¾
### 3.1 å¿…å¡«æ¥å£ï¼ˆä»»ä½• NFT åˆåŒå¿…é¡»å®ç°ï¼‰
```solidity
interface ERC721 {
    event  Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);
    event  Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);
    event  ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);

    function balanceOf(address _owner) external view returns (uint256);
    function ownerOf(uint256 _tokenId) external view returns (address);
    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable;
    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;
    function transferFrom(address _from, address _to, uint256 _tokenId) external payable;
    function approve(address _approved, uint256 _tokenId) external payable;
    function setApprovalForAll(address _operator, bool _approved) external;
    function getApproved(uint256 _tokenId) external view returns (address);
    function isApprovedForAll(address _owner, address _operator) external view returns (bool);
}
```
*åŠŸèƒ½é€Ÿè®°ï¼šè½¬è´¦ã€æˆæƒã€ä½™é¢ã€æŸ¥è¯¢ã€‚*

### 3.2 ERC165 æ”¯æ’‘æ¥å£
NFT åˆåŒè¿˜å¿…é¡»å®ç° **æ¥å£æ£€æµ‹** æ ‡å‡† ERC-165ï¼Œæ–¹ä¾¿ DApp åœ¨äº¤äº’å‰ç¡®è®¤å¯¹æ–¹æ”¯æŒå“ªäº›æ¥å£ï¼š
```solidity
interface ERC165 {
    function supportsInterface(bytes4 interfaceID) external view returns (bool);
}
```

---

## 4. å¯é€‰æ‰©å±•ï¼šMetadata & Enumerable
### 4.1 ERC721Metadataï¼šè®©å‰ç«¯çŸ¥é“â€œè¿™åªçŒ«é•¿ä»€ä¹ˆæ ·â€

```solidity
interface ERC721Metadata {
    function name() external view returns (string _name);
    function symbol() external view returns (string _symbol);
    function tokenURI(uint256 _tokenId) external view returns (string);
}
```
- `tokenURI` æŒ‡å‘ä¸€ä¸ª JSON æ–‡ä»¶ï¼ŒåŒ…å«åç§°ã€æè¿°ã€å›¾ç‰‡é“¾æ¥ï¼Œä¾‹å¦‚ï¼š
```json
{
  "name": "é‡‘æ¸å±‚çŒ« #10086",
  "description": "æ‹¥æœ‰éšè—å…‰çš„ç¨€æœ‰å“ç§",
  "image": "https://example.com/kitty_10086.png"
}
```
ğŸ‘‰ [å¦‚ä½• 10 åˆ†é’Ÿä¸º NFT ç”Ÿæˆæ°¸ä¸å¤±æ•ˆçš„é“¾ä¸‹å…ƒæ•°æ®ï¼Ÿ](https://okxdog.com/)

### 4.2 ERC721Enumerableï¼šæŸ¥è¯¢å…¨é‡æˆ–æ‰€æœ‰è€…åˆ—è¡¨
```solidity
interface ERC721Enumerable {
    function totalSupply() external view returns (uint256);
    function tokenByIndex(uint256 _index) external view returns (uint256);
    function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256);
}
```
è¿™å¯¹é“¾ä¸Šå·¥å…·ã€ç»Ÿè®¡ Web ç«™ç‚¹æå…¶å‹å¥½ï¼Œå¯æ— æ­»è§’æ‰«æ NFT åˆ†å¸ƒã€‚

---

## 5. å¿…å¤‡æ¦‚å¿µæ‹†é€
### 5.1 NFT IDï¼ˆ`tokenId`ï¼‰
- ç”¨ `uint256` è¡¨ç¤ºï¼Œåˆçº¦å†…æ°¸è¿œå”¯ä¸€  
- æ¨èç®—æ³•ï¼š  
  1) å…¨å±€è‡ªå¢ï¼›2) `sha256(uuid)` ç›´æ¥è½¬æˆæ•°å­—

### 5.2 ä¸‰é˜¶æ®µç”Ÿå‘½å‘¨æœŸ
- **é“¸é€ ï¼ˆMintï¼‰**ï¼šè°ƒç”¨å†…éƒ¨ `_mint`ï¼Œç”Ÿæˆæ–° `tokenId`ï¼›  
- **è½¬è´¦ï¼ˆTransferï¼‰**ï¼šé€šè¿‡ `safeTransferFrom` æˆ– `transferFrom` å®Œæˆï¼›  
- **é”€æ¯ï¼ˆBurnï¼‰**ï¼šæ ‡å‡†æœªç¡¬æ€§è§„å®šï¼Œå¯ç”±å¼€å‘è€…æ‰©å±•ã€‚

### 5.3 ä¸ ERC-20 çš„å…¼å®¹æ€§
- ERC-20ï¼šå¯æ‹†åˆ†ã€å¯ç½®æ¢çš„â€œç¾å…ƒâ€å‹ä»£å¸ï¼›  
- ERC-721ï¼šæœ€å°å•ä½ä¸º 1ï¼Œæ¯ä¸ªä»£å¸æ‹¥æœ‰ç‹¬ç«‹ **NFT å”¯ä¸€æ€§**ï¼Œè´¦æœ¬ç»“æ„ä¸å¤‡æ³¨ä¿¡æ¯æ›´ä¸°å¯Œã€‚

---

## 6. æ‰©å±•æ€è€ƒï¼šç°å®åœºæ™¯å¦‚ä½•è½é“¾ï¼Ÿ
| è¡Œä¸š | ä¸Šé“¾æ€è·¯ | å…³é”®ä»·å€¼ |
| --- | --- | --- |
| è‰ºæœ¯å“ | æ•°å­—æ°´å° + IPFS æ–‡ä»¶ + ERC-721 é“¸é€  | é˜²ä¼ªæº¯æº |
| æ¸¸æˆè£…å¤‡ | æ¸¸æˆå¼•æ“ç›‘å¬é“¾ä¸Š NFTï¼Œå®æ—¶æ¸²æŸ“ | ç”¨æˆ·â€œçœŸæ‹¥æœ‰â€ |
| æˆ¿äº§ | é“¾ä¸Šæ˜ å°„äº§æƒè¯ä¹¦ï¼ŒDID ç»‘å®šç°å®èº«ä»½ | å®‰å…¨å¿«é€Ÿäº¤æ˜“ |
| é—¨ç¥¨ | æ¼”å”±ä¼šé—¨ç¥¨å³ NFTï¼Œæ‰«ç æ ¸é”€åè‡ªåŠ¨é”€æ¯ | æœç»é»„ç‰› |

ğŸ‘‰ [ç«‹å³æŸ¥çœ‹ NFT èµ„äº§åœ¨ä¸»æµé“¾çš„é’±åŒ…ä¸äº¤æ˜“æ‰€å±•ç¤ºæ–¹æ¡ˆ](https://okxdog.com/)

---

## 7. FAQï¼šä¸‰åˆ†é’Ÿç ´è§£æ ¸å¿ƒç–‘æƒ‘
**Q1ï¼šERC-721 èƒ½ç›´æ¥æ‹†åˆ†æˆ 0.5 ä»½å–ç»™ä¸¤ä¸ªäººå—ï¼Ÿ**  
Aï¼šä¸èƒ½ã€‚æœ€å°å•ä½ä¸º 1ï¼›éœ€è¦å‡ºå”® 50% æƒç›Šï¼Œå¯é€šè¿‡è‚¡æƒåˆçº¦åŒé‡åµŒå¥—å®ç°ï¼Œä½†åŸç”Ÿ NFT æ— æ³•æ‹†åˆ†ã€‚

**Q2ï¼šé“¾ä¸Šåªå­˜ `tokenId`ï¼Œå´æœ‰äººè¯´ NFT â€œä¸¢å›¾ç‰‡â€ æ€ä¹ˆåŠï¼Ÿ**  
Aï¼šå¤§å¤šæ•°é¡¹ç›®å°†å›¾ç‰‡æˆ–å…ƒæ•°æ®æ”¾åœ¨ IPFS/Arweaveã€‚é‡‡è´­å‰åº”ç¡®è®¤ URI ä½¿ç”¨å»ä¸­å¿ƒåŒ–å­˜å‚¨ï¼Œå¹¶æ£€æŸ¥ **å…ƒæ•°æ®é”å®š** æƒé™ã€‚

**Q3ï¼š`transferFrom` å’Œ `safeTransferFrom` åŒºåˆ«ï¼Ÿ**  
Aï¼šåè€…ä¼šå…ˆæ£€æŸ¥ `_to` æ˜¯å¦åˆçº¦åœ°å€ï¼Œå†è°ƒç”¨ç›®æ ‡åˆçº¦çš„ `onERC721Received`ï¼Œé˜²æ­¢ NFTâ€œæ‰é»‘æ´â€ï¼›å¸¸è§„é’±åŒ…åœ°å€ä¸¤è€…**ç­‰æ•ˆ**ã€‚

**Q4ï¼šç”¨æˆ·å¦‚ä½•é˜²æ­¢è¯¯è½¬ NFT åˆ°äº¤æ˜“æ‰€å†·é’±åŒ…ï¼Ÿ**  
Aï¼šäº¤æ˜“æ‰€**å¿…é¡»**å‘ç”¨æˆ·å…¬å¸ƒæ”¯æŒ NFT çš„ `ERC721TokenReceiver` åˆçº¦åœ°å€ï¼Œæˆ–åœ¨å……å¸å…¥å£å®Œæˆç™½åå•æ£€æµ‹ã€‚

**Q5ï¼šæˆ‘æƒ³è‡ªå·±ä»é›¶å‘è¡Œ NFTï¼Œè¯„ä¼°æˆæœ¬çœ‹ä»€ä¹ˆï¼Ÿ**  
Aï¼šä¸»è¦å˜é‡ä¸º `Gas è´¹ç”¨=å­˜å‚¨æˆæœ¬ + äº‹ä»¶æˆæœ¬`ï¼Œé«˜å³°æœŸä¸€æ¬¡ Mint åœ¨ Ethereum ä¸»ç½‘çº¦ 0.01â€“0.05 ETHã€‚Layer2 æˆ–ä¾§é“¾å¯é™ä½ 90% ä»¥ä¸Šã€‚

---

## 8. å®æˆ˜å°ç»“
1. æŒæ¡ ERC-721 **äº”å¤§ä¼šå‘˜æ¥å£**ï¼šTransferã€Approveã€OwnerOfã€BalanceOfã€TokenURIï¼›  
2. ç†è§£ **å…ƒæ•°æ®æ ‡å‡†** è®© NFT å¯åœ¨é’±åŒ…å†…ç›´æ¥å±•ç¤ºé«˜æ¸…å›¾ï¼›  
3. ç‰¢è®° **åˆè§„é“¸é€ **ï¼šå…ˆ ERC165 æ³¨å†Œï¼Œå†é€æ¡å®ç°è½¬ç§»ã€æˆæƒå®‰å…¨ç­–ç•¥ï¼›  
4. æŠŠç°å®èµ„äº§å˜æˆ NFTï¼Œæ ¸å¿ƒæ˜¯â€œç¡®æƒ + å…ƒæ•°æ®ä¸å¯ç¯¡æ”¹â€ï¼›  
5. **éåŒè´¨åŒ–ä»£å¸** æ‰åˆšåˆšå¯å¹•ï¼Œè‰ºæœ¯å“ã€é—¨ç¥¨ã€åœ°äº§ã€ç‰ˆæƒå‡æœ‰å·¨å¤§ç©ºé—´ã€‚æå‰å¸ƒå±€ NFT åè®®æ ˆï¼Œæˆ–è®¸ä¸‹ä¸€æ³¢çº¢åˆ©å°±æœ‰ä½ ã€‚