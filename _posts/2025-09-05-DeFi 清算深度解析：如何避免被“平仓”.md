---
layout:     post
title:      DeFi 清算深度解析：如何避免被“平仓”
date:       2025-09-05
header-img: img/post-bg-desk.jpg
catalog: true
---

## 清算机制的核心逻辑

在 DeFi 借贷的世界里，“抵押品”才是生命线。一旦抵押品相对债务的价值跌破某个安全线，你的仓位随时可能被清算，**连本带利转入他人荷包**。  

为什么要有清算？超额抵押 + 价格波动的组合拳，让协议必须实时为“潜在坏账”做风险补偿。简单来说，它就是去中心化世界里的一键止损，既保护存款人，也给专业玩家留下套利空间。

---

## 1 关键概念速读

- **超额抵押**：借款金额 < 抵押品估价。主流协议如 **Compound、Maker、AAVE** 均采用。  
- **清算阈值**：触发清算的价格分割线，协议差异大，须牢记。  
- **坏账**：债务 > 抵押品；**一旦有坑，后清算人就无利可图，协议陷入挤兑风险**。

---

## 2 清算触发条件大对比

| 协议 | 关键指标 | 阈值方程式(简写版) | 备注 |
|---|---|---|---|
| Compound | AccountLiquidity | `NetCollateral > TotalBorrowUSD` | 美元计价 |
| Maker | Vault Safety | `ink × spot > art × rate` | DAI计价 |
| AAVE V2 | HealthFactor | `Hf < 1` | ETH计价 |

所有公式指向同一风控思路：**当“抵押价值 ÷ 债务价值”跌倒临界点，仓位进入清算名单**。

👉 [想亲手试算多家协议的潜在清算价格？点这里模拟计算，避免翻车](https://okxdog.com/)

---

### 3 Compound：账户流动性到底怎么算？

Compound 在 Comptroller 合约中用 `getAccountLiquidity()` 直呼“我欠多少”。流程拆解：

1. 拉取用户所有资产、负债的 **cToken 快照**（含汇率、抵押系数）。  
2. 参考 **Oracle** 价格 → 统一成美元。  
3. 汇总：`Σ(USD抵押) > Σ(USD负债)`，欠缺金额即可能清算额。

**注意**：抵押因子最高 0.9，但稳定币常设置在 0.7-0.8，波动越大的，越低。

---

### 4 Maker 金库：“咬”你的到底是 Dog 还是 Cat？

从 v1.2 的 `Cat.bite()` 到 v2.0 的 `Dog.bark()`，Maker 延续同一清算不等式：

 MortgageAssetsUSD / liquidationRatio ≥ DAI债务  

一旦左边 < 右边，金库即“不安全”。其后，**清算拍卖** 立刻开启，部分抵押资产低价出售，收回债务 + 稳定费。

---

### 5 AAVE V2：健康系数可随时 24×7 自测

```
健康系数 = 抵押总值×清算阈值 ÷ 债务总值
```

而代码实现里：**当 Hf<1，清算人可竞拍仓位**。  
Gauntlet 会定期通过治理提案调整 **liquidationThreshold**，热门资产常见值：

- DAI：0.9  
- ETH：0.825  
- 高波动代币：可能低至 0.65  

**一键记忆**：数值越大，可用杠杆越高，爆仓窗口也越早。

👉 [如何瞬间检测所有仓位健康系数？看这个简易查询技巧](https://okxdog.com/)

---

## 6 真实案例：穿仓幽灵如何飘过宇宙

- **地址**：`0x227c…a623`  
- **爆仓根因**：MANA 价格在 3 小时内飙升 165%，仓位从轻微盈利→巨额穿仓  
- **清算结果**：  
  - 累计 87 笔小清算，防止一次性砸盘  
  - 最终剩余抵押 ~0.6 ETH，剩余债务 ~45 ETH  
  - 健康系数永久坠地，协议与清算人均无力回天  

关键教训：  
1. 架构限制单笔清算不超 50%，保护市场流动性；  
2. 价格剧烈波动时，再多预言机也可能失效；  
3. 用户一旦错过补仓，就只有甩卖马克杯了。

---

## 7 防止清盘的六大实战策略

1. **分散抵押类别**：不要 All in 单一高波动币。  
2. **动态重设阈值**：区间监控工具 + Telegram 机器人推送。  
3. **预留稳定币**：始终保持 10%+ 内部缓冲区。  
4. **合理杠杆**：LTV > 60% 即是红线。  
5. **关注治理提案**：风险参数调整随时写入更新。  
6. **学会反向套利**：成为清算人可收益，但门槛高、需写_bot_。

---

## 常见疑问 FAQ

**Q1：为什么清算人只肯“一口一口吃掉”，而不是直接 all in？**  
A：协议限制单笔下限 50%，且一次性清算可能压垮流动性，导致无利可图。

**Q2：Gas 暴涨时，我的仓位是否容易被“漏网”清算？**  
A：确实，清算人跑 bot 时会估算 **Gas/利润比**；高 Gas 期可能延迟，也有被抢跑的风险。

**Q3：如果预言机价格暂停更新，还能清算吗？**  
A：大多数协议有紧急 Oracles，或暂停借/贷；以避免“幽灵价格”处理仓位。

**Q4：如何手动增加保证金？**  
A：把更多抵押品打入同一协议地址，健康系数立刻回升。注意确保币别符合该市场的抵押清单。

**Q5：被清算后剩余抵押品还能取回吗？**  
A：通常扣除债务＋清算罚金后，剩余部分可提出；若资不抵债，归零。

**Q6：稳定币抵押是否理论上“无爆仓”？**  
A：主流稳定币多用于高阈值，但黑天鹅脱锚事件同样会引发清算——参见 2022 年 UST 案例。

---

# 总结

DeFi 清算本质是一场同时间的博弈：用户 vs 市场波动 vs 清算人。牢记三大守则——**超额抵押、动态监控、分散风险**，你就能在绝大多数场景下远离“穿仓梦魇”。

放眼未来，以太坊 L2、跨链借贷及新型衍生品将进一步改写清算战场。下一次牛市来临之前，先把**清算概念**深深刻在脑海里——它可能是你最可靠的 Revival Kit。